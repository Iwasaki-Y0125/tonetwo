---
name: todo-to-issue-md
description: TODOリストや箇条書きメモから、GitHub Issueに貼れるMarkdown本文を作成する。タスク分解、受け入れ条件、完了条件を明文化したい依頼で使う。
---

<!--
使い方テンプレ（コピペ用）:

`todo-to-issue-md` を使って、GitHub Issueに貼れるMarkdown本文を作って。
対象は次のいずれかで明示する: `TODOキャプチャ` / `TODOコピペ` / `対象ファイルパス`。
`タイトル / 背景 / 目的 / TODO / 受け入れ条件 / 手順` の順で出力して。
不明点は `未確定` と明記して。記載がない不要なセクションは削除して。
必ず ```md``` で出力して。
-->

# TODO to Issue Markdown

## ゴール
- TODOを、実行可能なIssue本文（Markdown）に変換する。
- 情報不足がある場合は推測せず、欠落項目を明示する。
- ユーザーが明示したTODOだけを対象にIssue化する（デフォルト全体走査はしない）。
- 原則は1入力セット=1Issueで出力する（分割はユーザー指定時のみ）。

## 入力
- 必須: TODOキャプチャ、TODOコメント（例: `# TODO: ...`, `// TODO: ...`）、または抽出対象パス
- 任意: Issue番号、背景、期限、優先度、関連リンク

## 手順
1. TODOを収集する。
- ユーザーがTODOキャプチャを貼った場合はそれを最優先する。
- キャプチャから `source_path / todo_text / (line番号が見えるなら line)` を抽出する。
- 読み取り結果は処理前に短く復唱し、ユーザー確認後に進む。
- ユーザーがTODO本文を貼った場合はそれを優先する。
- ユーザーが対象ファイルパスを指定した場合のみ、その範囲でコメントTODOを抽出する。
- Markdownチェックリスト（`- [ ]` / `- [x]`）は抽出対象にしない。
- TODOキャプチャ、TODOコピペ、対象ファイル指定のいずれもない場合は、情報不足として停止する。
- TODOが0件なら、情報不足として停止する。

2. TODOを構造化する。
- 作業項目を「目的」「実装」「検証」「運用/ドキュメント」に分類する。
- 重複・曖昧表現を統合し、1項目1動詞に正規化する。

3. 情報不足を検出する。
- 最低限必要な要素: 目的、完了条件、検証方法。
- 欠落がある場合はIssue本文内で `未確定` と明記し、確認質問を末尾に列挙する。

4. Issue本文を生成する。(Markdown形式)
- 以下テンプレでMarkdownを出力する。

```md
# [Category/Tag] タイトル（日本語）

## 背景
-

## 目的
-

## TODO
- [ ]

## 受け入れ条件
- [ ]

## 手順
1.

```

5. 内容を検証する。
- TODOと受け入れ条件が1対1で追跡できるか確認する。
- 手順が実行可能か（コマンド/画面操作/期待結果があるか）を確認する。

## 出力ルール
- 日本語で簡潔に書く。
- 不明点は断定せず `未確定` と書く。
- 記載がない不要なセクションは削除する。
- 先頭に `# [Category/Tag] タイトル（日本語）` を必ず置く。
- `Category/Tag` は英語で書く（例: `deploy`, `security`, `ops`, `auth`）。
- `[]` の外側のタイトル本文は日本語で書く。
- 分割Issueはユーザーが要求した場合のみ提案する。
- 出力は必ず ` ```md ... ``` ` のコードブロックで返す。
