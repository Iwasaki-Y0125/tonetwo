# 依存関係のアップデート方針 (Initial)

本ドキュメントは ToneTwo の **リリース後の依存関係アップデート運用**の「方針」をまとめる。
具体的な手順（Runbook / コマンド / チェックリスト）は **MVPリリース後に確定・追記**する。

---

## 基本方針

- **小さく頻繁に出す**（大きな変更を溜めない）
- **切り戻せる前提**で進める（破壊的変更を一発で入れない）

---

## アップデート運用の粒度

### パッチ更新（即時寄り）
- 目的：**セキュリティ修正 / 既知不具合修正**の取り込み
- キャッチアップ方法：GitHub の **Dependabot（Security Updates / Version Updates）**を一次導線とする
- 方針：CIが通り、影響が小さいものは **早めに取り込む**

### メジャー更新（計画運用）
- 目的：サポート期限切れ・互換性ギャップの発生を避ける
- 方針：**「次がいつ出るか」よりも「いつまでに上げる必要があるか（EOL / サポート期限）」を基準に計画する**
- 運用：**四半期に1回の棚卸し**を実施し、必要なメジャー更新をIssue化して計画に載せる

---

## 四半期棚卸し（ルーチン）

- 頻度：四半期に1回
- 確認対象（例）
  - Rails / Ruby
  - PostgreSQL（Render）
  - Node.js（必要に応じて）
  - 主要Gem / フロント依存
- チェック項目
  - 直近のメジャーリリース状況
  - サポート期限（EOL）やサポートポリシー
  - 影響範囲（破壊的変更・移行コストの見積り）
- アウトプット
  - 「今期やる / 次期に回す / まだ不要」を判断
  - 必要なものは **Upgrade Issue（Epic）**として起票し、計画管理する

---

## バックアップ・監視との関係（前提）

- アップデート運用は「止め方・戻し方」がセットで成立するため、
  - バックアップ方針：`01backup_strategy/`
  - 監視方針：`02monitoring/`
  と整合する形で運用手順をMVP後に固める
