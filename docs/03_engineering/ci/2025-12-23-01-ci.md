# 開発メモ CIについて（GitHub Actions）

## 1. GitHub Actions / workflow とは
- GitHub Actions は「GitHub上で自動実行される処理の仕組み」
- workflow は `.github/workflows/*.yml` に置く設定ファイルのこと。
- workflow は **イベント（例：push / pull_request）** をトリガーに、複数の **job** を実行できる。
- job は GitHub が用意する一時的なUbuntu環境（runner）で動く。
- job は基本的に **独立**（別マシン）。job間でファイルやインストール結果は共有されない。
---
- Rails 7.2から標準搭載。
- Rails newの時点で自動生成される。(`--skip-ci`でCI作成をスキップすることも可能)
- ただし、Gemを増やしたりビルト内容が変更になった場合に自動で追従する機能はない。必要に応じて、今回のように追記していく必要がある。

---

## 2. CI構成と役割
- `scan_ruby`: Brakeman -Railsアプリ特有の脆弱性（SQLインジェクションやXSSなどチェック）
- `scan_js`: importmap audit（JS依存のライブラリ等に脆弱性がないかチェック）
- `lint`: Rubocop（コード整形・静的解析）
- `test`: Railsテスト（DBあり・system testあり）

`ci.yml`のソースコードの内容の詳細についてはci.ymlにコメントで記載

---


参考:
  - https://docs.github.com/ja/actions/get-started/quickstart

  - https://blog.saeloun.com/2024/05/02/rails-adds-github-ci-by-default

  - https://qiita.com/maabow/items/25b0d6febcf5e56db30c

  - https://zenn.dev/praha/articles/9e561bdaac1d23
